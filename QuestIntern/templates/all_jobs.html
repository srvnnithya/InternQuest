<!-- templates/jobs/all_jobs.html -->

<!DOCTYPE html>
<html>
<head>
    <title>All Jobs</title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script>
        $(document).ready(function () {
            // Function to filter jobs based on selected year
            function filterJobs(year) {
                $('ul li').show();  // Show all jobs
                if (year !== 'all') {
                    $('ul li').not(`:contains('${year}')`).hide();  // Hide jobs with the non-selected year
                }
            }

            // Event handler for the filter dropdown change
            $('#year_filter').change(function () {
                var selectedYear = $(this).val();
                filterJobs(selectedYear);
            });
        });
    </script>
</head>

<body>
   <div class="flex justify-end">
    <div class="ml-4">
        <label for="year_filter" >Filter by Year:</label>
        <select id="year_filter" class="mt-1 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:border-blue-300 dark:bg-gray-700 dark:text-white">
            <option value="all" selected class="hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">All Years</option>
            <option value="1" class="hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">1st Year</option>
            <option value="2" class="hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">2nd Year</option>
            <option value="3" class="hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">3rd Year</option>
            <option value="4" class="hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">4th Year</option>
        </select>
    </div>
</div>


    <ul>
        {% for job in jobs %}
            <li>
                <section class="text-gray-600 body-font overflow-hidden">
                    <div class="container px-5 py-24 mx-auto">
                        <div class="-my-8 divide-y-2 divide-gray-100">
                        <div class="py-8 flex flex-wrap md:flex-nowrap">
                            <div class="md:w-64 md:mb-0 mb-6 flex-shrink-0 flex flex-col">
                            <span class="font-semibold title-font text-gray-700">Posted By</span>
                            <span class="mt-1 text-gray-500 text-sm">{{ job.posted_by }}</span>
                            </div>
                            <div class="md:flex-grow">
                            <h2 class="text-2xl font-medium text-gray-900 title-font mb-2">{{ job.company }}</h2>
                            <p class="leading-relaxed">
                                Salary: {{ job.salary }}
                            </p>
                            <p class="leading-relaxed">
                                Eligible above: {{ job.get_year_from_display }}
                            </p>
                            <a href="{{ job.url }}" class="text-indigo-500 inline-flex items-center mt-4">Apply for this job
                                <svg class="w-4 h-4 ml-2" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M5 12h14"></path>
                                <path d="M12 5l7 7-7 7"></path>
                                </svg>
                            </a>
                            </div>
                        </div>
                        </div>
                    </div>
                </section>
            </li>
        {% endfor %}
    </ul>
</body>
</html>
